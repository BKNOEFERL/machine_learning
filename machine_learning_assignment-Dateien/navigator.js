var nx=nx||{},JSON=JSON||{};nx.iac=nx.iac||{},function(){function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var i,n,s,o,a,r=gap,c=e[t];switch(c&&"object"==typeof c&&"function"==typeof c.toJSON&&(c=c.toJSON(t)),"function"==typeof rep&&(c=rep.call(e,t,c)),typeof c){case"string":return quote(c);case"number":return isFinite(c)?String(c):"null";case"boolean":case"null":return String(c);case"object":if(!c)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(c)){for(o=c.length,i=0;o>i;i+=1)a[i]=str(i,c)||"null";return s=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+r+"]":"["+a.join(",")+"]",gap=r,s}if(rep&&"object"==typeof rep)for(o=rep.length,i=0;o>i;i+=1)n=rep[i],"string"==typeof n&&(s=str(n,c),s&&a.push(quote(n)+(gap?": ":":")+s));else for(n in c)Object.hasOwnProperty.call(c,n)&&(s=str(n,c),s&&a.push(quote(n)+(gap?": ":":")+s));return s=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+r+"}":"{"+a.join(",")+"}",gap=r,s}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(t){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(t){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,i){var n;if(gap="",indent="","number"==typeof i)for(n=0;i>n;n+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var i,n,s=t[e];if(s&&"object"==typeof s)for(i in s)Object.hasOwnProperty.call(s,i)&&(n=walk(s,i),void 0!==n?s[i]=n:delete s[i]);return reviver.call(t,e,s)}var j;if(cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),!function(t,e,i){function n(t){if("number"!=typeof t)throw new o("Wrong data type for flags. flags must be numeric.","Use_case_wrong_flagged");if(t=parseInt(t,10),nx.iac.type.USECASE&t&&nx.iac.type.EVENT&t)throw new o("You cannot flag a IAC message as USECASE and EVENT.","Use_case_wrong_flagged");if(!(nx.iac.type.USECASE&t||nx.iac.type.EVENT&t))throw new o("You must flag a IAC message as USECASE or EVENT","Use_case_wrong_flagged");if(nx.iac.type.RPC&t&&nx.iac.type.RPE&t)throw new o("You cannot flag a IAC message as RPC and RPE.","Use_case_wrong_flagged");if(!(nx.iac.type.RPC&t||nx.iac.type.RPE&t))throw new o("You must flag a IAC message as RPC or RPE","Use_case_wrong_flagged");if(nx.iac.type.INTERN&t&&nx.iac.type.EXTERN&t)throw new o("You cannot flag a IAC message as INTERN and EXTERN.","Use_case_wrong_flagged");if(!(nx.iac.type.INTERN&t||nx.iac.type.EXTERN&t))throw new o("You must flag a IAC message as INTERN or EXTERN","Use_case_wrong_flagged");return t}function s(t,e){var i=Array.prototype.slice(arguments,2);return function(){return t.apply(e,i.concat(Array.prototype.slice.call(arguments)))}}function o(t,e){this.name="IACError",this.message=t||"An unknown IAC error occured"}function a(){this.onMessage=function(){},this.onInitialized=function(){},this.init=function(){throw new o("Missing abstract IACTransport::init() method.")},this.initialized=function(){throw new o("Missing abstract IACTransport::initialized() method.")},this.send=function(t,e){throw new o("Missing abstract IACTransport::send() method.")}}function r(e){var i=!1;this.init=function(){var e=s(this.onMessageWrapper,this);t.addEventListener?t.addEventListener("message",e,!1):t.attachEvent("onmessage",e),i=!0,this.onInitialized()},this.initialized=function(){return i},this.onMessageWrapper=function(t){var e;try{e=JSON.parse(t.data)}catch(i){nx.iac.Debugger.hey().warn("Any unknownable post message protocol detected.")}finally{e&&this.onMessage(this.incomingMessageFactory(e))}},this.send=function(t,e){t=this.outgoingMessageFactory(t,e),(e?e.contentWindow:top).postMessage(JSON.stringify(t),"*")}}function c(){var t={type:0,sender:"",usecase:"",args:[]};this.setFlags=function(e){t.type|=e},this.getFlags=function(){return t.type},this.unsetFlag=function(e){for(var i=-1;Math.pow(2,++i)!=e;);return t.type&=~(1<<i),this},this.setSender=function(e){if("string"!=typeof e)throw new o("Wrong data type for sender. sender must be a type of string.");if(!e)throw new o("The sender cannot be empty.");return t.sender=e,this},this.getSender=function(){return t.sender},this.setName=function(e){if("string"!=typeof e)throw new o("Wrong data type for name. name must be a type of string.","Invalid_Use_case_name");if(!e)throw new o("The name cannot be empty.","Invalid_Use_case_name");return t.usecase=e,this},this.getName=function(){return t.usecase},this.setPayload=function(){return t.args=Array.prototype.slice.call(arguments),this},this.getPayload=function(){return t.args},this.getRawData=function(){return t}}function l(t,e){this.protocol=t,this.transport=e,this.pending=!0,this.send=function(t){if(t&&("object"!=typeof t||!t.contentWindow||!t.iacAppname))throw new o("No valid message target given.");return n(this.protocol.getFlags()),this.transport.initialized()?(this.pending=!1,this.transport.send(this.protocol.getRawData(),t)):this.pending=!0,this},this.isPending=function(){return!!this.pending},this.setName=function(t){return this.protocol.setName(t),this},this.getName=function(){return this.protocol.getName()},this.getSender=function(){return this.protocol.getSender()},this.setPayload=function(){return this.protocol.setPayload.apply(this.protocol,arguments),this},this.getPayload=function(){return this.protocol.getPayload()}}function h(){this.asRPE=function(){return this.protocol.unsetFlag(nx.iac.type.RPC).setFlags(nx.iac.type.RPE),this},this.asRPC=function(){return this.protocol.unsetFlag(nx.iac.type.RPE).setFlags(nx.iac.type.RPC),this},this.asIntern=function(){return this.protocol.unsetFlag(nx.iac.type.EXTERN).setFlags(nx.iac.type.INTERN),this},this.asExtern=function(){return this.protocol.unsetFlag(nx.iac.type.INTERN).setFlags(nx.iac.type.EXTERN),this}}function u(){}function p(t){this.name="NavigatorError",this.message=t}function g(){var t={};this.extend=function(e){$.isPlainObject(e)&&(t=$.extend(!0,{},t,e))},this.get=function(){return t}}function f(){this.config={},this.$frame=null,this.iacVersion=null,this.iacConnected=!1,this.iacConnectionTimeout=null,this.iacFocusCounter=0,this.iacResumeFocusCounter=0,this.iacBlurCounter=0,this.iacRestartCounter=0,this.iacDisabledCounter=0,this.iacEnabledCounter=0,this.getSysname=function(){return this.config.sysname},this.getTitle=function(){return this.config.name},this.open=function(){throw new p("This method is abstract and must be implemented.")},this.reopen=function(t){this.$frame.on("load",$.proxy(function(){this.$frame.off("load").attr("src",this.config.url_map[t||"default"])},this)).attr("src","about:blank")},this.close=function(){throw new p("This method is abstract and must be implemented.")},this.focus=function(){return this.isRunning()&&this.$frame.addClass("focus"),this},this.unfocus=function(){return this.isRunning()&&this.$frame.removeClass("focus"),this},this.isOnFocus=function(){return this.isRunning()?this.$frame.hasClass("focus"):i},this.isRunning=function(){return this.$frame&&1==this.$frame.length},this.updateConfig=function(){return this.config=nx.Config.get().navigator.apps[this.getSysname()],this},this.getURL=function(t){return this.config.url_map[t&&t in this.config.url_map?t:"default"]||"about:blank"},this.setURL=function(t,e){return this.config.url_map[t||"default"]=e||"about:blank",this},this.keyInURLMap=function(t){return t in this.config.url_map},this.getInitialUsecase=function(){return nx.IACCommunication.createUsecaseFromConfig(this.config.iac.initial_usecase)},this.getIACSendingInformation=function(){if(!this.isRunning())throw new p("The application must be running, to resolve IAC sending information.");return{contentWindow:this.$frame.get(0).contentWindow,iacAppname:this.getSysname(),iacVersion:this.iacVersion}},this.update=function(t,e){var i=this.getSysname(),n=this;return $.ajax({url:nx.Config.get().navigator.resolve_app_data_url.replace(/_sysname_/,i),type:"get",cache:!1,converter:{"text json":jQuery.parseJSON},data:{reset:e},statusCode:{401:function(){C.trigger(C.event.KEEPALIVE_FAILED,401)}},success:s(function(e,i,n){var s=e;$.isPlainObject(s)||(s=JSON.parse(s)),nx.Config.extend({navigator:s}),this.updateConfig(),$.isFunction(t)&&t()},n)}),this},this.setFrameReference=function(e){return e&&e!==this.$frame&&this.config.iac.fallback&&this.config.iac.fallback.timeout&&(this.iacConnectionTimeout=t.setTimeout(s(function(){if(!this.iacConnected){this.$frame.attr("src",this.config.iac.fallback.url);try{"splash"===this.getSysname()&&$("#splash-tracker").append(['<img src="//freemail.web.de/stat/pixel/splashfallback/?si=',location.search.replace("?sid=",""),"&ts=",(new Date).getTime(),'">'].join(""))}catch(e){}this.config.iac.fallback.connection_fallback_pixel&&P.handle(nx.IACCommunication.createUsecase("tracking_track",{section:this.config.iac.fallback.connection_fallback_pixel,modifier:"-,ft"}).asRPE())}t.clearTimeout(this.iacConnectionTimeout)},this),this.config.iac.fallback.timeout)),this.$frame=e,this},this.reinitialize=function(){this.iacConnected=!1,this.isRunning()&&this.update(s(function(){nx.Navigator.reopenApplication(this.getSysname(),!1,"default")},this),"true")},this.hasFeedback=function(){return!!this.config.feedback}}function d(){this.open=function(t,e){var i=$('<iframe id="r'+1e9*Math.random()+'" frameborder="0" allowtransparency="true" webkitallowfullscreen mozallowfullscreen allowfullscreen="true" name="'+this.getSysname()+'" class="application '+this.getSysname()+(this.config.display_enabled?" display_enabled":"")+'" src="'+this.getURL(e)+'"></iframe>');this.setFrameReference(i),t.append(i)},this.close=function(){}}function m(){this.$dialog=null,this.open=function(t,e){t.removeClass("application fullscreen").addClass(this.config.dialog_properties.canvas_size).data("DialogCanvas",{modal:this.config.dialog_properties.modal,sysname:this.getSysname()});var i=['<ul class="title-bar">','  <li class="title">%name%</li>','  <li class="close">',"    <button></button>","  </li>","</ul>"].join(""),n=['<div class="dialog focus %sysname%" style="margin-top: %top%px; width: %width%px;">',"  %titlebar%",'  <div class="content">','    <iframe id="r'+1e9*Math.random()+'" frameborder="0" src="'+this.getURL(e)+'" style="height: %height%px; width: 100%;" allowtransparency="true"></iframe>',"  </div>","</div>"].join(""),s=$(n.replace(/%sysname%/i,this.getSysname()).replace(/%top%/i,this.config.dialog_properties.top).replace(/%width%/i,this.config.dialog_properties.width).replace(/%height%/i,this.config.dialog_properties.height).replace(/%titlebar%/,this.config.dialog_properties.titlebar?i.replace(/%name%/i,this.getTitle()):"")),o=s.find("iframe"),a={};this.$dialog=s,this.config.dialog_properties.background||$.extend(a,{background:"transparent"}),this.config.dialog_properties.borderstyle||$.extend(a,{border:"none","box-shadow":"none"}),this.$dialog.css(a),this.config.dialog_properties.draggable?this.$dialog.draggable({containment:t,handle:t.find("ul.title-bar"),iframeFix:!0}).css({position:"absolute"}):this.$dialog.draggable("disable"),this.setFrameReference(o),this.$dialog.find("li.close").bind("click",function(){y.closeDialogComponent(this.getSysname())}).end().find("div.content").html(o),t.append(this.$dialog).addClass("opened")},this.close=function(t){this.$frame.remove(),this.$dialog.remove(),this.setFrameReference(null),t.removeClass("opened")}}function v(){var t,e,i={};this.init=function(){return t=nx.Config.get().communication,e=new r(t),e.onMessage=s(this.onMessage,this),e.onInitialized=s($.noop,this),e.init(),this},this.onMessage=function(t){return t instanceof h?void P.handle(t):void nx.iac.Debugger.hey().warn("Received an IAC message which not a valid IACUsecase object. IAC events are just usable for simplex communication; Navigator to apps.")},this.createUsecaseFromConfig=function(t){return a.prototype.incomingMessageFactory.call(e,t)},this.invokeStartupUsecase=function(t){return P.handle(this.createUsecaseFromConfig(t)),this},this.createUsecase=function(t,i){var n=new h;return n.protocol=new c,n.transport=e,n.protocol.setFlags(nx.iac.type.USECASE|nx.iac.type.RPC|nx.iac.type.INTERN),n.protocol.setSender(O.SYSNAME),n.setName(t),n.setPayload("object"==typeof i?i:{}),n.config=nx.Config.get().communication.usecases[t],n},this.hasUsecase=function(e){return t.usecases.hasOwnProperty(e)},this.appStarted=function(t){return nx.Navigator.getApplications(t).isRunning()},this.createEvent=function(t,i){var n=new u;return n.protocol=new c,n.transport=e,n.protocol.setFlags(nx.iac.type.EVENT|nx.iac.type.RPE|nx.iac.type.INTERN),n.protocol.setSender(O.SYSNAME),n.setName(t),i=i||{},i.type=t,i.timeStamp=(new Date).getTime(),n.setPayload(i),n},this.sendMessage=function(t,e){if(!(t instanceof l))throw new p("Cannot send a message which is not an instance of IACMessage");if(!(e instanceof f))throw new p("The receiver application must be a instance of BaseApplication");t instanceof h&&!t.validate()||(e.iacConnected?t.send(e.getIACSendingInformation()):this.queueMessage(t,e))},this.queueMessage=function(t,e){if(!(t instanceof l))throw new p("Cannot queue a message which is not an instance of IACMessage");if(!(e instanceof f))throw new p("The receiver application must be a instance of BaseApplication");i.hasOwnProperty(e.getSysname())||(i[e.getSysname()]=[]),i[e.getSysname()].push(t)},this.sendQueuedMessages=function(t){if(!(t instanceof f))throw new p("The receiver application must be a instance of BaseApplication");return t.iacConnected?($.each(i[t.getSysname()]||{},s(function(e,i){this.sendMessage(i,t)},this)),void(i[t.getSysname()]=[])):this}}function y(){this.apps={},this.openedDialogs={},this.$window=$(t),this.$html=$("html"),this.$body=$("body"),this.$navigator=$("#navigator"),this.$mandatorLogo=$("#mandator-logo"),this.$feedbackClip=$("#feedback-clip"),this.$applications=$("#applications"),this.$logout=$("#logout"),this.$appCanvas=$("#application-canvas"),this.$dialogCanvas=$("#dialog-canvas"),this.init=function(){var t=nx.Config.get();this.operaRenderingIssue(),this.initApps(),this.initEvents(),_.run(),x.init(),w.run(),A.init(),E.init(),N.init(),"undefined"!=typeof I&&t.navigator&&t.navigator.softlogout&&I.init(t.navigator.softlogout);var e={section:"event.startup",modifier:"-,waimg1,wac10"};t.campaign&&(e.campaign=nx.Config.get().campaign),t&&t.user&&t.user.origin&&(e.label={origin:t.user.origin}),P.handle(nx.IACCommunication.createUsecase("tracking_track",e).asRPE()),S.init(),this.startup(),this.hasSoftlogout()&&P.handle(nx.IACCommunication.createUsecase("add_wusa").asRPE())},this.operaRenderingIssue=function(){this.$html.css("color","#000")},this.initApps=function(){return $.each(nx.Config.get().navigator.apps,s(function(t,e){var i;switch(e.view_mode){case"application":i=new d;break;case"dialog":i=new m;break;default:throw new p("Unknown component type '"+e.view_mode+"'")}i.config=e,this.apps[t]=i},this)),this},this.initEvents=function(){this.$mandatorLogo.on("click",s(function(){this.isDisabled()||P.handle(this.getApplications("home").getInitialUsecase())},this)),this.$feedbackClip.on("click",s(function(){var t=this.getApplications("feedback_dialog").getInitialUsecase();t.protocol.setSender(this.getFocusedApplication().getSysname()),P.handle(t)},this)),this.$applications.on("mouseenter mousedown mouseup mouseleave","li",s(function(e){if(!this.isDisabled()){var i=$(e.currentTarget);if(i.hasClass("emigwebde"))switch(e.type){case"mouseenter":i.addClass("hover");break;case"mouseleave":i.removeClass("hover").removeClass("click");break;case"mouseup":i.removeClass("click"),t.open("https://web.de/e-mail-made-in-germany?mc=navigator@icon@emig.emig","emig")}else if(i.hasClass("emiggmx"))switch(e.type){case"mouseenter":i.addClass("hover");break;case"mouseleave":i.removeClass("hover").removeClass("click");break;case"mouseup":i.removeClass("click"),t.open("https://www.gmx.net/e-mail-made-in-germany?mc=navigator@icon@emig.emig","emig")}else switch(e.type){case"mouseenter":i.addClass("hover");break;case"mousedown":i.removeClass("hover").addClass("click");break;case"mouseleave":i.removeClass("hover").removeClass("click");break;case"mouseup":i.removeClass("click");var n=i.attr("class").split(" ")[0],s=this.getApplications(n);"clubcenter"!=n||nx.Config.get().user.payuser?P.handle(s.getInitialUsecase()):P.handle(nx.IACCommunication.createUsecase("open_digitaledienste").setPayload("goto=/freemail/club/club_3c/","mc=03951401"))}}},this)),this.$dialogCanvas.on("click",s(function(t){var e=$(t.currentTarget),i=e.data("DialogCanvas");i.modal||this.closeDialog(i.sysname)},this)),this.$logout.on("click",s(function(){this.checkSoftLogout()},this))},this.startup=function(){try{if(this.handleScope())return this}catch(t){}var e,i=nx.Config.get().navigator.startup;for(e in i.usecases)nx.IACCommunication.invokeStartupUsecase(i.usecases[e]);return i.toolbarevent&&this.$window.trigger(jQuery.Event("unitedinternet_toolbar_start_usecase",{payload:i.toolbarevent})),this},this.handleScope=function(){if(t.location.hash){var e=t.location.hash.replace(/^#/,"");return this.hasApplication(e)?(P.handle(this.getApplications(e).getInitialUsecase()),!0):!1}return!1},this.hasApplication=function(t){return this.apps.hasOwnProperty(t)},this.getFocusedApplication=function(){var t=this.getApplications("*",s(function(t){return t instanceof d&&t.isRunning()&&t.isOnFocus()},this));return!t||1!==t.length,(t||[]).pop()},this.getApplications=function(t,e){if("*"==t){var i;t=[];for(i in this.apps)t.push(i)}if($.isArray(t)){var n,o=[];return $.each(t,s(function(t,i){return this.hasApplication(i)?(n=this.apps[i],$.isFunction(e)&&!e(n)?!0:void o.push(n)):(nx.Log.warn(["Unknown application '",i,"' in nx.Navigator::getApplications(). Application skipped ..."].join("")),!0)},this)),o}return this.hasApplication(t)?this.apps[t]:null},this.openApplication=function(t,e,i){if(!this.hasApplication(t))throw new p('Trying to start unknown application "'+t+'".');var n=this.getApplications(t),s=n.isRunning();if(!(n instanceof d))throw new p('"'+t+'" is not a instance of FullScreenApplication.');return s||(n.open(this.$appCanvas,i),nx.IACCommunication.sendMessage(nx.IACCommunication.createEvent(T.ONSTART),n)),("boolean"==typeof onfocus||e===!1)&&this.focusApplication(t,!s),this},this.reopenApplication=function(t,e,i){if(!this.hasApplication(t))throw new p('Trying to restart unknown application "'+t+'".');var n=this.getApplications(t),s=n.isRunning();return s&&(n.reopen(i),nx.IACCommunication.sendMessage(nx.IACCommunication.createEvent(T.ONRESTART,{count:++n.iacRestartCounter}),n)),"boolean"==typeof e&&e?this.focusApplication(t,!s):n.isOnFocus()&&"mail"!=n.getSysname()&&nx.IACCommunication.sendMessage(nx.IACCommunication.createEvent(T.ONFOCUS,{count:++n.iacFocusCounter}),n),this},this.closeApplication=function(t){return this},this.openDialog=function(t,e,i){if(!this.hasApplication(e))throw new p('Trying to restart unknown dialog application "'+e+'".');var n=this.getApplications(e);return n.isRunning()||(n.open(this.$dialogCanvas,i),nx.IACCommunication.sendMessage(nx.IACCommunication.createEvent(T.ONSTART),n),nx.IACCommunication.sendMessage(nx.IACCommunication.createEvent(T.ONDISABLED,{count:++t.iacDisabledCounter}),t),this.openedDialogs[t.getSysname()]=n),this},this.closeDialog=function(t){if(!this.hasApplication(t))throw new p('Trying to close unknown dialog application "'+t+'".');var e,i=this.getApplications(t);return $.each(this.openedDialogs,s(function(t,n){return n===i?(e=this.getApplications(t),nx.IACCommunication.sendMessage(nx.IACCommunication.createEvent(T.ONCLOSE),e),nx.IACCommunication.sendMessage(nx.IACCommunication.createEvent(T.ONENABLED,{count:++e.iacEnabledCounter}),e),i.iacConnected&&(i.iacConnected=!1),i.close(this.$dialogCanvas),delete this.openedDialogs[t],!1):void 0},this)),this},this.focusApplication=function(e,i){var n,o=this.getApplications(e),a=this.getFocusedApplication();if(o.isOnFocus())nx.IACCommunication.sendMessage(nx.IACCommunication.createEvent(T.ONRESUMEFOCUS,{count:++o.iacResumeFocusCounter}),o);else{if(a&&(a.unfocus(),nx.IACCommunication.sendMessage(nx.IACCommunication.createEvent(T.ONBLUR,{count:++a.iacBlurCounter}),a)),$.each(this.openedDialogs,s(function(t){n=this.getApplications(t),n instanceof m&&n.isRunning()&&n.isOnFocus()&&(n.unfocus(),nx.IACCommunication.sendMessage(nx.IACCommunication.createEvent(T.ONBLUR,{count:++n.iacBlurCounter}),n))},this)),this.openedDialogs.hasOwnProperty(e)?(this.disableApplicationContext(),this.openedDialogs[e].focus(),nx.IACCommunication.sendMessage(nx.IACCommunication.createEvent(T.ONFOCUS,{count:++this.openedDialogs[e].iacFocusCounter}),this.openedDialogs[e])):this.enableApplicationContext(),o.focus(),E.brush(e),i&&"mail"==e||nx.IACCommunication.sendMessage(nx.IACCommunication.createEvent(T.ONFOCUS,{count:++o.iacFocusCounter}),o),"home"!=e?this.$html.css("overflow","hidden"):this.$html.css({overflow:"auto","overflow-y":"hidden"}),this.$applications.find("li").removeClass("selected").end().find("li."+e).addClass("selected"),t.location.hash!="#"+e){var r=e;"replaceState"in t.history?"#"!==(""+e).charAt(0)&&(r="#"+r,t.history.replaceState("","",r)):t.location.hash="#"+r}o.hasFeedback()?this.$feedbackClip.show():this.$feedbackClip.hide()}return this},this.disableApplicationContext=function(){this.$dialogCanvas.addClass("opened")},this.enableApplicationContext=function(){this.$dialogCanvas.removeClass("opened")},this.disable=function(){return this.$navigator.removeClass("enabled").addClass("disabled"),this},this.enable=function(){return this.$navigator.removeClass("disabled").addClass("enabled"),this},this.isDisabled=function(){return this.$navigator.hasClass("disabled")},this.hide=function(){return this.$html.addClass("hidden"),this},this.show=function(){return this.$html.removeClass("hidden"),this},this.update=function(t){return $.get(nx.Config.get().navigator.resolve_apps_data_url,s(function(e){var i=e;$.isPlainObject(i)||(i=JSON.parse(i)),nx.Config.extend({navigator:i}),$.each(this.getApplications("*"),function(t,e){e.updateConfig()}),$.isFunction(t)&&t()},this),"json"),this},this.redirect=function(e,i){i?t.location.replace(e):location.href=e},this.hasSoftlogout=function(){return"undefined"!=typeof I&&I.isEnabled()},this.checkSoftLogout=function(t){this.hasSoftlogout()?I.isPending()||I.start(this.getFocusedApplication().getSysname()).done($.proxy(function(){this.logout()},this)).fail($.proxy(function(){},this)):this.logout()},this.logout=function(t){_.stop();var e=nx.Config.get().navigator.logout_url;return t&&(e+="&target="+t),this.redirect(e,!0),this},this.reinitialize=function(t){if(!this.hasApplication(O.SYSNAME))throw new p("Navigator app is not configured for reinitialization.");$.get(nx.Config.get().navigator.logout_apps_url),$.get(nx.Config.get().navigator.resolve_reinit_url,{"goto":t},s(function(t){$.isPlainObject(t)||(t=JSON.parse(t)),this.redirect(t.url,!0)},this))},this.handleFeature=function(t,e,i){$.get(nx.Config.get().navigator.resolve_app_url,{feature:t,mc:e,data:i},s(function(e){var i;$.isPlainObject(e)||(e=JSON.parse(e)),this.hasApplication(e.sysname)?(i=this.getApplications(e.sysname),i instanceof d&&(i.setURL("default",e.url),i.isRunning()?this.reopenApplication(e.sysname,!0):this.openApplication(e.sysname,!1))):nx.Log.warn('No application found for feature "'+t+'"')},this))}}nx.iac.type={USECASE:1,EVENT:2,RPC:4,RPE:8,INTERN:16,EXTERN:32},!function(t,e){var i={_nativeSupport:function(){return!!e.btoa&&t.isFunction(e.btoa)&&!!e.atob&&t.isFunction(e.atob)},_key:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_utf8_encode:function(t){t=t.replace(/\r\n/g,"\n");for(var e,i="",n=0,s=t.length;s>n;n++)e=t.charCodeAt(n),128>e?i+=String.fromCharCode(e):e>127&&2048>e?(i+=String.fromCharCode(e>>6|192),i+=String.fromCharCode(63&e|128)):(i+=String.fromCharCode(e>>12|224),i+=String.fromCharCode(e>>6&63|128),i+=String.fromCharCode(63&e|128));return i},_utf8_decode:function(t){for(var e="",i=0,n=c1=c2=0;i<t.length;)n=t.charCodeAt(i),128>n?(e+=String.fromCharCode(n),i++):n>191&&224>n?(c2=t.charCodeAt(i+1),e+=String.fromCharCode((31&n)<<6|63&c2),i+=2):(c2=t.charCodeAt(i+1),c3=t.charCodeAt(i+2),e+=String.fromCharCode((15&n)<<12|(63&c2)<<6|63&c3),i+=3);return e},encode:function(t){if(i._nativeSupport())return e.btoa(t);var n,s,o,a,r,c,l,h="",u=0;for(t=i._utf8_encode(t);u<t.length;)n=t.charCodeAt(u++),s=t.charCodeAt(u++),o=t.charCodeAt(u++),a=n>>2,r=(3&n)<<4|s>>4,c=(15&s)<<2|o>>6,l=63&o,isNaN(s)?c=l=64:isNaN(o)&&(l=64),h=h+i._key.charAt(a)+i._key.charAt(r)+i._key.charAt(c)+i._key.charAt(l);return h},decode:function(t){if(i._nativeSupport())return e.atob(t);var n,s,o,a,r,c,l,h="",u=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");u<t.length;)a=i._key.indexOf(t.charAt(u++)),r=i._key.indexOf(t.charAt(u++)),c=i._key.indexOf(t.charAt(u++)),l=i._key.indexOf(t.charAt(u++)),n=a<<2|r>>4,s=(15&r)<<4|c>>2,o=(3&c)<<6|l,h+=String.fromCharCode(n),64!=c&&(h+=String.fromCharCode(s)),64!=l&&(h+=String.fromCharCode(o));return h=i._utf8_decode(h)}};t.base64=function(e){return e in i?(/^_.*/.test(e)&&t.error(e+" is a private method"),i[e].apply(this,Array.prototype.slice.call(arguments,1))):void t.error("Unknown method "+e)}}(jQuery,t),function(t,i){function n(e,i){var n=e.nodeName.toLowerCase();return"area"===n?(i=e.parentNode,n=i.name,e.href&&n&&"map"===i.nodeName.toLowerCase()?(e=t("img[usemap=#"+n+"]")[0],!!e&&s(e)):!1):(/input|select|textarea|button|object/.test(n)?!e.disabled:"a"==n?e.href||i:i)&&s(e)}function s(e){return!t(e).parents().andSelf().filter(function(){return"hidden"===t.curCSS(this,"visibility")||t.expr.filters.hidden(this)}).length}t.ui=t.ui||{},t.ui.version||(t.extend(t.ui,{version:"1.8.14",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),t.fn.extend({_focus:t.fn.focus,focus:function(e,i){return"number"==typeof e?this.each(function(){var n=this;setTimeout(function(){t(n).focus(),i&&i.call(n)},e)}):this._focus.apply(this,arguments)},scrollParent:function(){var i;return i=t.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(t.curCSS(this,"position",1))&&/(auto|scroll)/.test(t.curCSS(this,"overflow",1)+t.curCSS(this,"overflow-y",1)+t.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(t.curCSS(this,"overflow",1)+t.curCSS(this,"overflow-y",1)+t.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!i.length?t(e):i},zIndex:function(n){if(n!==i)return this.css("zIndex",n);if(this.length){n=t(this[0]);for(var s;n.length&&n[0]!==e;){if(s=n.css("position"),("absolute"===s||"relative"===s||"fixed"===s)&&(s=parseInt(n.css("zIndex"),10),!isNaN(s)&&0!==s))return s;n=n.parent()}}return 0},disableSelection:function(){return this.bind((t.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(t){t.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),t.each(["Width","Height"],function(e,n){function s(e,i,n,s){return t.each(o,function(){i-=parseFloat(t.curCSS(e,"padding"+this,!0))||0,n&&(i-=parseFloat(t.curCSS(e,"border"+this+"Width",!0))||0),s&&(i-=parseFloat(t.curCSS(e,"margin"+this,!0))||0)}),i}var o="Width"===n?["Left","Right"]:["Top","Bottom"],a=n.toLowerCase(),r={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+n]=function(e){return e===i?r["inner"+n].call(this):this.each(function(){t(this).css(a,s(this,e)+"px")})},t.fn["outer"+n]=function(e,i){return"number"!=typeof e?r["outer"+n].call(this,e):this.each(function(){t(this).css(a,s(this,e,!0,i)+"px")})}}),t.extend(t.expr[":"],{data:function(e,i,n){return!!t.data(e,n[3])},focusable:function(e){return n(e,!isNaN(t.attr(e,"tabindex")))},tabbable:function(e){var i=t.attr(e,"tabindex"),s=isNaN(i);return(s||i>=0)&&n(e,!s)}}),t(function(){var i=e.body,n=i.appendChild(n=e.createElement("div"));t.extend(n.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),t.support.minHeight=100===n.offsetHeight,t.support.selectstart="onselectstart"in n,i.removeChild(n).style.display="none"}),t.extend(t.ui,{plugin:{add:function(e,i,n){e=t.ui[e].prototype;for(var s in n)e.plugins[s]=e.plugins[s]||[],e.plugins[s].push([i,n[s]])},call:function(t,e,i){if((e=t.plugins[e])&&t.element[0].parentNode)for(var n=0;n<e.length;n++)t.options[e[n][0]]&&e[n][1].apply(t.element,i)}},contains:function(t,i){return e.compareDocumentPosition?16&t.compareDocumentPosition(i):t!==i&&t.contains(i)},hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;i=i&&"left"===i?"scrollLeft":"scrollTop";var n=!1;return e[i]>0?!0:(e[i]=1,n=e[i]>0,e[i]=0,n)},isOverAxis:function(t,e,i){return t>e&&e+i>t},isOver:function(e,i,n,s,o,a){return t.ui.isOverAxis(e,n,o)&&t.ui.isOverAxis(i,s,a)}}))}(jQuery),function(t,e){if(t.cleanData){var i=t.cleanData;t.cleanData=function(e){for(var n,s=0;null!=(n=e[s]);s++)t(n).triggerHandler("remove");i(e)}}else{var n=t.fn.remove;t.fn.remove=function(e,i){return this.each(function(){return i||(!e||t.filter(e,[this]).length)&&t("*",this).add([this]).each(function(){t(this).triggerHandler("remove")}),n.call(t(this),e,i)})}}t.widget=function(e,i,n){var s,o=e.split(".")[0];e=e.split(".")[1],s=o+"-"+e,n||(n=i,i=t.Widget),t.expr[":"][s]=function(i){return!!t.data(i,e)},t[o]=t[o]||{},t[o][e]=function(t,e){arguments.length&&this._createWidget(t,e)},i=new i,i.options=t.extend(!0,{},i.options),t[o][e].prototype=t.extend(!0,i,{namespace:o,widgetName:e,widgetEventPrefix:t[o][e].prototype.widgetEventPrefix||e,widgetBaseClass:s},n),t.widget.bridge(e,t[o][e])},t.widget.bridge=function(i,n){t.fn[i]=function(s){var o="string"==typeof s,a=Array.prototype.slice.call(arguments,1),r=this;return s=!o&&a.length?t.extend.apply(null,[!0,s].concat(a)):s,o&&"_"===s.charAt(0)?r:(o?this.each(function(){var n=t.data(this,i),o=n&&t.isFunction(n[s])?n[s].apply(n,a):n;return o!==n&&o!==e?(r=o,!1):void 0}):this.each(function(){var e=t.data(this,i);e?e.option(s||{})._init():t.data(this,i,new n(s,this))}),r)}},t.Widget=function(t,e){arguments.length&&this._createWidget(t,e)},t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(e,i){t.data(i,this.widgetName,this),this.element=t(i),this.options=t.extend(!0,{},this.options,this._getCreateOptions(),e);
var n=this;this.element.bind("remove."+this.widgetName,function(){n.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return t.metadata&&t.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(i,n){var s=i;if(0===arguments.length)return t.extend({},this.options);if("string"==typeof i){if(n===e)return this.options[i];s={},s[i]=n}return this._setOptions(s),this},_setOptions:function(e){var i=this;return t.each(e,function(t,e){i._setOption(t,e)}),this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&this.widget()[e?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",e),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(e,i,n){var s=this.options[e];if(i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),n=n||{},i.originalEvent){e=t.event.props.length;for(var o;e;)o=t.event.props[--e],i[o]=i.originalEvent[o]}return this.element.trigger(i,n),!(t.isFunction(s)&&s.call(this.element[0],i,n)===!1||i.isDefaultPrevented())}}}(jQuery),function(t){var i=!1;t(e).mousedown(function(){i=!1}),t.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(i){return!0===t.data(i.target,e.widgetName+".preventClickEvent")?(t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(n){if(!i){this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var s=this,o=1==n.which,a="string"==typeof this.options.cancel?t(n.target).closest(this.options.cancel).length:!1;return o&&!a&&this._mouseCapture(n)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){s.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(n)&&this._mouseDelayMet(n)&&(this._mouseStarted=this._mouseStart(n)!==!1,!this._mouseStarted)?(n.preventDefault(),!0):(!0===t.data(n.target,this.widgetName+".preventClickEvent")&&t.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return s._mouseMove(t)},this._mouseUpDelegate=function(t){return s._mouseUp(t)},t(e).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),i=!0)):!0}},_mouseMove:function(i){return!t.browser.msie||e.documentMode>=9||i.button?this._mouseStarted?(this._mouseDrag(i),i.preventDefault()):(this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&((this._mouseStarted=this._mouseStart(this._mouseDownEvent,i)!==!1)?this._mouseDrag(i):this._mouseUp(i)),!this._mouseStarted):this._mouseUp(i)},_mouseUp:function(i){return t(e).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,i.target==this._mouseDownEvent.target&&t.data(i.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(i)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(e){e.ui=e.ui||{};var i=/left|center|right/,n=/top|center|bottom/,s=e.fn.position,o=e.fn.offset;e.fn.position=function(t){if(!t||!t.of)return s.apply(this,arguments);t=e.extend({},t);var o,a,r,c=e(t.of),l=c[0],h=(t.collision||"flip").split(" "),u=t.offset?t.offset.split(" "):[0,0];return 9===l.nodeType?(o=c.width(),a=c.height(),r={top:0,left:0}):l.setTimeout?(o=c.width(),a=c.height(),r={top:c.scrollTop(),left:c.scrollLeft()}):l.preventDefault?(t.at="left top",o=a=0,r={top:t.of.pageY,left:t.of.pageX}):(o=c.outerWidth(),a=c.outerHeight(),r=c.offset()),e.each(["my","at"],function(){var e=(t[this]||"").split(" ");1===e.length&&(e=i.test(e[0])?e.concat(["center"]):n.test(e[0])?["center"].concat(e):["center","center"]),e[0]=i.test(e[0])?e[0]:"center",e[1]=n.test(e[1])?e[1]:"center",t[this]=e}),1===h.length&&(h[1]=h[0]),u[0]=parseInt(u[0],10)||0,1===u.length&&(u[1]=u[0]),u[1]=parseInt(u[1],10)||0,"right"===t.at[0]?r.left+=o:"center"===t.at[0]&&(r.left+=o/2),"bottom"===t.at[1]?r.top+=a:"center"===t.at[1]&&(r.top+=a/2),r.left+=u[0],r.top+=u[1],this.each(function(){var i,n=e(this),s=n.outerWidth(),c=n.outerHeight(),l=parseInt(e.curCSS(this,"marginLeft",!0))||0,p=parseInt(e.curCSS(this,"marginTop",!0))||0,g=s+l+(parseInt(e.curCSS(this,"marginRight",!0))||0),f=c+p+(parseInt(e.curCSS(this,"marginBottom",!0))||0),d=e.extend({},r);"right"===t.my[0]?d.left-=s:"center"===t.my[0]&&(d.left-=s/2),"bottom"===t.my[1]?d.top-=c:"center"===t.my[1]&&(d.top-=c/2),d.left=Math.round(d.left),d.top=Math.round(d.top),i={left:d.left-l,top:d.top-p},e.each(["left","top"],function(n,r){e.ui.position[h[n]]&&e.ui.position[h[n]][r](d,{targetWidth:o,targetHeight:a,elemWidth:s,elemHeight:c,collisionPosition:i,collisionWidth:g,collisionHeight:f,offset:u,my:t.my,at:t.at})}),e.fn.bgiframe&&n.bgiframe(),n.offset(e.extend(d,{using:t.using}))})},e.ui.position={fit:{left:function(i,n){var s=e(t);s=n.collisionPosition.left+n.collisionWidth-s.width()-s.scrollLeft(),i.left=s>0?i.left-s:Math.max(i.left-n.collisionPosition.left,i.left)},top:function(i,n){var s=e(t);s=n.collisionPosition.top+n.collisionHeight-s.height()-s.scrollTop(),i.top=s>0?i.top-s:Math.max(i.top-n.collisionPosition.top,i.top)}},flip:{left:function(i,n){if("center"!==n.at[0]){var s=e(t);s=n.collisionPosition.left+n.collisionWidth-s.width()-s.scrollLeft();var o="left"===n.my[0]?-n.elemWidth:"right"===n.my[0]?n.elemWidth:0,a="left"===n.at[0]?n.targetWidth:-n.targetWidth,r=-2*n.offset[0];i.left+=n.collisionPosition.left<0?o+a+r:s>0?o+a+r:0}},top:function(i,n){if("center"!==n.at[1]){var s=e(t);s=n.collisionPosition.top+n.collisionHeight-s.height()-s.scrollTop();var o="top"===n.my[1]?-n.elemHeight:"bottom"===n.my[1]?n.elemHeight:0,a="top"===n.at[1]?n.targetHeight:-n.targetHeight,r=-2*n.offset[1];i.top+=n.collisionPosition.top<0?o+a+r:s>0?o+a+r:0}}}},e.offset.setOffset||(e.offset.setOffset=function(t,i){/static/.test(e.curCSS(t,"position"))&&(t.style.position="relative");var n=e(t),s=n.offset(),o=parseInt(e.curCSS(t,"top",!0),10)||0,a=parseInt(e.curCSS(t,"left",!0),10)||0;s={top:i.top-s.top+o,left:i.left-s.left+a},"using"in i?i.using.call(t,s):n.css(s)},e.fn.offset=function(t){var i=this[0];return i&&i.ownerDocument?t?this.each(function(){e.offset.setOffset(this,t)}):o.call(this):null})}(jQuery),function(i){i.widget("ui.draggable",i.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"!=this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){return this.element.data("draggable")?(this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this):void 0},_mouseCapture:function(t){var e=this.options;return this.helper||e.disabled||i(t.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(t),this.handle?(i(e.iframeFix===!0?"iframe":e.iframeFix).each(function(){i('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(i(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var e=this.options;return this.helper=this._createHelper(t),this._cacheHelperProportions(),i.ui.ddmanager&&(i.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},i.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt),e.containment&&this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),i.ui.ddmanager&&!e.dropBehaviour&&i.ui.ddmanager.prepareOffsets(this,t),this.helper.addClass("ui-draggable-dragging"),this._mouseDrag(t,!0),i.ui.ddmanager&&i.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,e){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!e){if(e=this._uiHash(),this._trigger("drag",t,e)===!1)return this._mouseUp({}),!1;this.position=e.position}return this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i.ui.ddmanager&&i.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var e=!1;if(i.ui.ddmanager&&!this.options.dropBehaviour&&(e=i.ui.ddmanager.drop(this,t)),this.dropped&&(e=this.dropped,this.dropped=!1),!(this.element[0]&&this.element[0].parentNode||"original"!=this.options.helper))return!1;if("invalid"==this.options.revert&&!e||"valid"==this.options.revert&&e||this.options.revert===!0||i.isFunction(this.options.revert)&&this.options.revert.call(this.element,e)){var n=this;i(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){n._trigger("stop",t)!==!1&&n._clear()})}else this._trigger("stop",t)!==!1&&this._clear();return!1},_mouseUp:function(t){return this.options.iframeFix===!0&&i("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),i.ui.ddmanager&&i.ui.ddmanager.dragStop(this,t),i.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var e=this.options.handle&&i(this.options.handle,this.element).length?!1:!0;return i(this.options.handle,this.element).find("*").andSelf().each(function(){this==t.target&&(e=!0)}),e},_createHelper:function(t){var e=this.options;return t=i.isFunction(e.helper)?i(e.helper.apply(this.element[0],[t])):"clone"==e.helper?this.element.clone().removeAttr("id"):this.element,t.parents("body").length||t.appendTo("parent"==e.appendTo?this.element[0].parentNode:e.appendTo),t[0]!=this.element[0]&&!/(fixed|absolute)/.test(t.css("position"))&&t.css("position","absolute"),t},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),i.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=e&&i.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==e.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&i.browser.msie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var t=this.element.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var n=this.options;if("parent"==n.containment&&(n.containment=this.helper[0].parentNode),("document"==n.containment||"window"==n.containment)&&(this.containment=["document"==n.containment?0:i(t).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==n.containment?0:i(t).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==n.containment?0:i(t).scrollLeft())+i("document"==n.containment?e:t).width()-this.helperProportions.width-this.margins.left,("document"==n.containment?0:i(t).scrollTop())+(i("document"==n.containment?e:t).height()||e.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(n.containment)||n.containment.constructor==Array)n.containment.constructor==Array&&(this.containment=n.containment);else{n=i(n.containment);var s=n[0];if(s){n.offset();var o="hidden"!=i(s).css("overflow");this.containment=[(parseInt(i(s).css("borderLeftWidth"),10)||0)+(parseInt(i(s).css("paddingLeft"),10)||0),(parseInt(i(s).css("borderTopWidth"),10)||0)+(parseInt(i(s).css("paddingTop"),10)||0),(o?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(i(s).css("borderLeftWidth"),10)||0)-(parseInt(i(s).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(o?Math.max(s.scrollHeight,s.offsetHeight):s.offsetHeight)-(parseInt(i(s).css("borderTopWidth"),10)||0)-(parseInt(i(s).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n}}},_convertPositionTo:function(t,n){n||(n=this.position),t="absolute"==t?1:-1;var s="absolute"!=this.cssPosition||this.scrollParent[0]!=e&&i.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);return{top:n.top+this.offset.relative.top*t+this.offset.parent.top*t-(i.browser.safari&&i.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():o?0:s.scrollTop())*t),left:n.left+this.offset.relative.left*t+this.offset.parent.left*t-(i.browser.safari&&i.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*t)}},_generatePosition:function(t){var n=this.options,s="absolute"!=this.cssPosition||this.scrollParent[0]!=e&&i.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName),a=t.pageX,r=t.pageY;if(this.originalPosition){var c;this.containment&&(this.relative_container?(c=this.relative_container.offset(),c=[this.containment[0]+c.left,this.containment[1]+c.top,this.containment[2]+c.left,this.containment[3]+c.top]):c=this.containment,t.pageX-this.offset.click.left<c[0]&&(a=c[0]+this.offset.click.left),t.pageY-this.offset.click.top<c[1]&&(r=c[1]+this.offset.click.top),t.pageX-this.offset.click.left>c[2]&&(a=c[2]+this.offset.click.left),t.pageY-this.offset.click.top>c[3]&&(r=c[3]+this.offset.click.top)),n.grid&&(r=n.grid[1]?this.originalPageY+Math.round((r-this.originalPageY)/n.grid[1])*n.grid[1]:this.originalPageY,r=c&&(r-this.offset.click.top<c[1]||r-this.offset.click.top>c[3])?r-this.offset.click.top<c[1]?r+n.grid[1]:r-n.grid[1]:r,a=n.grid[0]?this.originalPageX+Math.round((a-this.originalPageX)/n.grid[0])*n.grid[0]:this.originalPageX,a=c&&(a-this.offset.click.left<c[0]||a-this.offset.click.left>c[2])?a-this.offset.click.left<c[0]?a+n.grid[0]:a-n.grid[0]:a)}return{top:r-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(i.browser.safari&&i.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():o?0:s.scrollTop()),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(i.browser.safari&&i.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,e,n){return n=n||this._uiHash(),i.ui.plugin.call(this,t,[e,n]),"drag"==t&&(this.positionAbs=this._convertPositionTo("absolute")),i.Widget.prototype._trigger.call(this,t,e,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),i.extend(i.ui.draggable,{version:"1.8.14"}),i.ui.plugin.add("draggable","connectToSortable",{start:function(t,e){var n=i(this).data("draggable"),s=n.options,o=i.extend({},e,{item:n.element});n.sortables=[],i(s.connectToSortable).each(function(){var e=i.data(this,"sortable");e&&!e.options.disabled&&(n.sortables.push({instance:e,shouldRevert:e.options.revert}),e.refreshPositions(),e._trigger("activate",t,o))})},stop:function(t,e){var n=i(this).data("draggable"),s=i.extend({},e,{item:n.element});i.each(n.sortables,function(){this.instance.isOver?(this.instance.isOver=0,n.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"==n.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,s))})},drag:function(t,e){var n=i(this).data("draggable"),s=this;i.each(n.sortables,function(){this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=i(s).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return e.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=n.offset.click.top,this.instance.offset.click.left=n.offset.click.left,this.instance.offset.parent.left-=n.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=n.offset.parent.top-this.instance.offset.parent.top,n._trigger("toSortable",t),n.dropped=this.instance.element,n.currentItem=n.element,this.instance.fromOutside=n),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),n._trigger("fromSortable",t),n.dropped=!1)})}}),i.ui.plugin.add("draggable","cursor",{start:function(){var t=i("body"),e=i(this).data("draggable").options;t.css("cursor")&&(e._cursor=t.css("cursor")),t.css("cursor",e.cursor)},stop:function(){var t=i(this).data("draggable").options;t._cursor&&i("body").css("cursor",t._cursor)}}),i.ui.plugin.add("draggable","opacity",{start:function(t,e){t=i(e.helper),e=i(this).data("draggable").options,t.css("opacity")&&(e._opacity=t.css("opacity")),t.css("opacity",e.opacity)},stop:function(t,e){t=i(this).data("draggable").options,t._opacity&&i(e.helper).css("opacity",t._opacity)}}),i.ui.plugin.add("draggable","scroll",{start:function(){var t=i(this).data("draggable");t.scrollParent[0]!=e&&"HTML"!=t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(n){var s=i(this).data("draggable"),o=s.options,a=!1;s.scrollParent[0]!=e&&"HTML"!=s.scrollParent[0].tagName?(o.axis&&"x"==o.axis||(s.overflowOffset.top+s.scrollParent[0].offsetHeight-n.pageY<o.scrollSensitivity?s.scrollParent[0].scrollTop=a=s.scrollParent[0].scrollTop+o.scrollSpeed:n.pageY-s.overflowOffset.top<o.scrollSensitivity&&(s.scrollParent[0].scrollTop=a=s.scrollParent[0].scrollTop-o.scrollSpeed)),o.axis&&"y"==o.axis||(s.overflowOffset.left+s.scrollParent[0].offsetWidth-n.pageX<o.scrollSensitivity?s.scrollParent[0].scrollLeft=a=s.scrollParent[0].scrollLeft+o.scrollSpeed:n.pageX-s.overflowOffset.left<o.scrollSensitivity&&(s.scrollParent[0].scrollLeft=a=s.scrollParent[0].scrollLeft-o.scrollSpeed))):(o.axis&&"x"==o.axis||(n.pageY-i(e).scrollTop()<o.scrollSensitivity?a=i(e).scrollTop(i(e).scrollTop()-o.scrollSpeed):i(t).height()-(n.pageY-i(e).scrollTop())<o.scrollSensitivity&&(a=i(e).scrollTop(i(e).scrollTop()+o.scrollSpeed))),o.axis&&"y"==o.axis||(n.pageX-i(e).scrollLeft()<o.scrollSensitivity?a=i(e).scrollLeft(i(e).scrollLeft()-o.scrollSpeed):i(t).width()-(n.pageX-i(e).scrollLeft())<o.scrollSensitivity&&(a=i(e).scrollLeft(i(e).scrollLeft()+o.scrollSpeed)))),a!==!1&&i.ui.ddmanager&&!o.dropBehaviour&&i.ui.ddmanager.prepareOffsets(s,n)}}),i.ui.plugin.add("draggable","snap",{start:function(){var t=i(this).data("draggable"),e=t.options;t.snapElements=[],i(e.snap.constructor!=String?e.snap.items||":data(draggable)":e.snap).each(function(){var e=i(this),n=e.offset();this!=t.element[0]&&t.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:n.top,left:n.left})})},drag:function(t,e){for(var n=i(this).data("draggable"),s=n.options,o=s.snapTolerance,a=e.offset.left,r=a+n.helperProportions.width,c=e.offset.top,l=c+n.helperProportions.height,h=n.snapElements.length-1;h>=0;h--){var u=n.snapElements[h].left,p=u+n.snapElements[h].width,g=n.snapElements[h].top,f=g+n.snapElements[h].height;if(a>u-o&&p+o>a&&c>g-o&&f+o>c||a>u-o&&p+o>a&&l>g-o&&f+o>l||r>u-o&&p+o>r&&c>g-o&&f+o>c||r>u-o&&p+o>r&&l>g-o&&f+o>l){if("inner"!=s.snapMode){var d=Math.abs(g-l)<=o,m=Math.abs(f-c)<=o,v=Math.abs(u-r)<=o,y=Math.abs(p-a)<=o;d&&(e.position.top=n._convertPositionTo("relative",{top:g-n.helperProportions.height,left:0}).top-n.margins.top),m&&(e.position.top=n._convertPositionTo("relative",{top:f,left:0}).top-n.margins.top),v&&(e.position.left=n._convertPositionTo("relative",{top:0,left:u-n.helperProportions.width}).left-n.margins.left),y&&(e.position.left=n._convertPositionTo("relative",{top:0,left:p}).left-n.margins.left)}var b=d||m||v||y;"outer"!=s.snapMode&&(d=Math.abs(g-c)<=o,m=Math.abs(f-l)<=o,v=Math.abs(u-a)<=o,y=Math.abs(p-r)<=o,d&&(e.position.top=n._convertPositionTo("relative",{top:g,left:0}).top-n.margins.top),m&&(e.position.top=n._convertPositionTo("relative",{top:f-n.helperProportions.height,left:0}).top-n.margins.top),v&&(e.position.left=n._convertPositionTo("relative",{top:0,left:u}).left-n.margins.left),y&&(e.position.left=n._convertPositionTo("relative",{top:0,left:p-n.helperProportions.width}).left-n.margins.left)),!n.snapElements[h].snapping&&(d||m||v||y||b)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,t,i.extend(n._uiHash(),{snapItem:n.snapElements[h].item})),n.snapElements[h].snapping=d||m||v||y||b}else n.snapElements[h].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,t,i.extend(n._uiHash(),{snapItem:n.snapElements[h].item})),n.snapElements[h].snapping=!1}}}),i.ui.plugin.add("draggable","stack",{start:function(){var t=i(this).data("draggable").options;if(t=i.makeArray(i(t.stack)).sort(function(t,e){return(parseInt(i(t).css("zIndex"),10)||0)-(parseInt(i(e).css("zIndex"),10)||0)}),t.length){var e=parseInt(t[0].style.zIndex)||0;i(t).each(function(t){this.style.zIndex=e+t}),this[0].style.zIndex=e+t.length}}}),i.ui.plugin.add("draggable","zIndex",{start:function(t,e){t=i(e.helper),e=i(this).data("draggable").options,t.css("zIndex")&&(e._zIndex=t.css("zIndex")),t.css("zIndex",e.zIndex)},stop:function(t,e){t=i(this).data("draggable").options,t._zIndex&&i(e.helper).css("zIndex",t._zIndex)}})}(jQuery),function(i,n){var s={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},o={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},a=i.attrFn||{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0,click:!0};i.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(t){var e=i(this).css(t).offset().top;0>e&&i(this).css("top",t.top-e)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),"string"!=typeof this.originalTitle&&(this.originalTitle=""),this.options.title=this.options.title||this.originalTitle;var t=this,n=t.options,s=n.title||"&#160;",o=i.ui.dialog.getTitleId(t.element),a=(t.uiDialog=i("<div></div>")).appendTo(e.body).hide().addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+n.dialogClass).css({zIndex:n.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(e){n.closeOnEscape&&e.keyCode&&e.keyCode===i.ui.keyCode.ESCAPE&&(t.close(e),e.preventDefault())}).attr({role:"dialog","aria-labelledby":o}).mousedown(function(e){t.moveToTop(!1,e)});t.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(a);var r=(t.uiDialogTitlebar=i("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(a),c=i('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){c.addClass("ui-state-hover")},function(){c.removeClass("ui-state-hover")}).focus(function(){c.addClass("ui-state-focus")}).blur(function(){c.removeClass("ui-state-focus")}).click(function(e){return t.close(e),!1}).appendTo(r);(t.uiDialogTitlebarCloseText=i("<span></span>")).addClass("ui-icon ui-icon-closethick").text(n.closeText).appendTo(c),i("<span></span>").addClass("ui-dialog-title").attr("id",o).html(s).prependTo(r),i.isFunction(n.beforeclose)&&!i.isFunction(n.beforeClose)&&(n.beforeClose=n.beforeclose),r.find("*").add(r).disableSelection(),n.draggable&&i.fn.draggable&&t._makeDraggable(),n.resizable&&i.fn.resizable&&t._makeResizable(),t._createButtons(n.buttons),t._isOpen=!1,i.fn.bgiframe&&a.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var t=this;return t.overlay&&t.overlay.destroy(),t.uiDialog.hide(),t.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),t.uiDialog.remove(),t.originalTitle&&t.element.attr("title",t.originalTitle),t},widget:function(){return this.uiDialog},close:function(t){var e,n,s=this;return!1!==s._trigger("beforeClose",t)?(s.overlay&&s.overlay.destroy(),s.uiDialog.unbind("keypress.ui-dialog"),s._isOpen=!1,s.options.hide?s.uiDialog.hide(s.options.hide,function(){s._trigger("close",t)}):(s.uiDialog.hide(),s._trigger("close",t)),i.ui.dialog.overlay.resize(),s.options.modal&&(e=0,i(".ui-dialog").each(function(){this!==s.uiDialog[0]&&(n=i(this).css("z-index"),isNaN(n)||(e=Math.max(e,n)))}),i.ui.dialog.maxZ=e),s):void 0},isOpen:function(){return this._isOpen},moveToTop:function(t,e){var n=this,s=n.options;return s.modal&&!t||!s.stack&&!s.modal?n._trigger("focus",e):(s.zIndex>i.ui.dialog.maxZ&&(i.ui.dialog.maxZ=s.zIndex),n.overlay&&(i.ui.dialog.maxZ+=1,n.overlay.$el.css("z-index",i.ui.dialog.overlay.maxZ=i.ui.dialog.maxZ)),t={scrollTop:n.element.attr("scrollTop"),scrollLeft:n.element.attr("scrollLeft")},i.ui.dialog.maxZ+=1,n.uiDialog.css("z-index",i.ui.dialog.maxZ),n.element.attr(t),n._trigger("focus",e),n)},open:function(){if(!this._isOpen){var t=this,e=t.options,n=t.uiDialog;return t.overlay=e.modal?new i.ui.dialog.overlay(t):null,t._size(),t._position(e.position),n.show(e.show),t.moveToTop(!0),e.modal&&n.bind("keypress.ui-dialog",function(t){if(t.keyCode===i.ui.keyCode.TAB){var e=i(":tabbable",this),n=e.filter(":first");if(e=e.filter(":last"),t.target===e[0]&&!t.shiftKey)return n.focus(1),!1;if(t.target===n[0]&&t.shiftKey)return e.focus(1),!1}}),i(t.element.find(":tabbable").get().concat(n.find(".ui-dialog-buttonpane :tabbable").get().concat(n.get()))).eq(0).focus(),t._isOpen=!0,t._trigger("open"),t}},_createButtons:function(t){var e=this,n=!1,s=i("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),o=i("<div></div>").addClass("ui-dialog-buttonset").appendTo(s);e.uiDialog.find(".ui-dialog-buttonpane").remove(),"object"==typeof t&&null!==t&&i.each(t,function(){return!(n=!0)}),n&&(i.each(t,function(t,n){n=i.isFunction(n)?{click:n,text:t}:n;var s=i('<button type="button"></button>').click(function(){n.click.apply(e.element[0],arguments)}).appendTo(o);i.each(n,function(t,e){"click"!==t&&(t in a?s[t](e):s.attr(t,e))}),i.fn.button&&s.button()}),s.appendTo(e.uiDialog))},_makeDraggable:function(){function t(t){return{position:t.position,offset:t.offset}}var n,s=this,o=s.options,a=i(e);s.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(e,a){n="auto"===o.height?"auto":i(this).height(),i(this).height(i(this).height()).addClass("ui-dialog-dragging"),s._trigger("dragStart",e,t(a))},drag:function(e,i){s._trigger("drag",e,t(i))},stop:function(e,r){o.position=[r.position.left-a.scrollLeft(),r.position.top-a.scrollTop()],i(this).removeClass("ui-dialog-dragging").height(n),s._trigger("dragStop",e,t(r)),i.ui.dialog.overlay.resize()}})},_makeResizable:function(t){function e(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}t=t===n?this.options.resizable:t;var s=this,o=s.options,a=s.uiDialog.css("position");t="string"==typeof t?t:"n,e,s,w,se,sw,ne,nw",s.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:s.element,maxWidth:o.maxWidth,maxHeight:o.maxHeight,minWidth:o.minWidth,minHeight:s._minHeight(),handles:t,start:function(t,n){i(this).addClass("ui-dialog-resizing"),s._trigger("resizeStart",t,e(n))},resize:function(t,i){s._trigger("resize",t,e(i))},stop:function(t,n){i(this).removeClass("ui-dialog-resizing"),o.height=i(this).height(),o.width=i(this).width(),s._trigger("resizeStop",t,e(n)),i.ui.dialog.overlay.resize()}}).css("position",a).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(e){var n,s=[],o=[0,0];e?(("string"==typeof e||"object"==typeof e&&"0"in e)&&(s=e.split?e.split(" "):[e[0],e[1]],1===s.length&&(s[1]=s[0]),i.each(["left","top"],function(t,e){+s[t]===s[t]&&(o[t]=s[t],s[t]=e);
}),e={my:s.join(" "),at:s.join(" "),offset:o.join(" ")}),e=i.extend({},i.ui.dialog.prototype.options.position,e)):e=i.ui.dialog.prototype.options.position,(n=this.uiDialog.is(":visible"))||this.uiDialog.show(),this.uiDialog.css({top:0,left:0}).position(i.extend({of:t},e)),n||this.uiDialog.hide()},_setOptions:function(t){var e=this,n={},a=!1;i.each(t,function(t,i){e._setOption(t,i),t in s&&(a=!0),t in o&&(n[t]=i)}),a&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",n)},_setOption:function(t,e){var n=this,s=n.uiDialog;switch(t){case"beforeclose":t="beforeClose";break;case"buttons":n._createButtons(e);break;case"closeText":n.uiDialogTitlebarCloseText.text(""+e);break;case"dialogClass":s.removeClass(n.options.dialogClass).addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+e);break;case"disabled":e?s.addClass("ui-dialog-disabled"):s.removeClass("ui-dialog-disabled");break;case"draggable":var o=s.is(":data(draggable)");o&&!e&&s.draggable("destroy"),!o&&e&&n._makeDraggable();break;case"position":n._position(e);break;case"resizable":(o=s.is(":data(resizable)"))&&!e&&s.resizable("destroy"),o&&"string"==typeof e&&s.resizable("option","handles",e),!o&&e!==!1&&n._makeResizable(e);break;case"title":i(".ui-dialog-title",n.uiDialogTitlebar).html(""+(e||"&#160;"))}i.Widget.prototype._setOption.apply(n,arguments)},_size:function(){var t,e,n=this.options,s=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0}),n.minWidth>n.width&&(n.width=n.minWidth),t=this.uiDialog.css({height:"auto",width:n.width}).height(),e=Math.max(0,n.minHeight-t),"auto"===n.height?i.support.minHeight?this.element.css({minHeight:e,height:"auto"}):(this.uiDialog.show(),n=this.element.css("height","auto").height(),s||this.uiDialog.hide(),this.element.height(Math.max(n,e))):this.element.height(Math.max(n.height-t,0)),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),i.extend(i.ui.dialog,{version:"1.8.14",uuid:0,maxZ:0,getTitleId:function(t){return t=t.attr("id"),t||(this.uuid+=1,t=this.uuid),"ui-dialog-title-"+t},overlay:function(t){this.$el=i.ui.dialog.overlay.create(t)}}),i.extend(i.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:i.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(t){return t+".dialog-overlay"}).join(" "),create:function(n){0===this.instances.length&&(setTimeout(function(){i.ui.dialog.overlay.instances.length&&i(e).bind(i.ui.dialog.overlay.events,function(t){return i(t.target).zIndex()<i.ui.dialog.overlay.maxZ?!1:void 0})},1),i(e).bind("keydown.dialog-overlay",function(t){n.options.closeOnEscape&&t.keyCode&&t.keyCode===i.ui.keyCode.ESCAPE&&(n.close(t),t.preventDefault())}),i(t).bind("resize.dialog-overlay",i.ui.dialog.overlay.resize));var s=(this.oldInstances.pop()||i("<div></div>").addClass("ui-widget-overlay")).appendTo(e.body).css({width:this.width(),height:this.height()});return i.fn.bgiframe&&s.bgiframe(),this.instances.push(s),s},destroy:function(n){var s=i.inArray(n,this.instances);-1!=s&&this.oldInstances.push(this.instances.splice(s,1)[0]),0===this.instances.length&&i([e,t]).unbind(".dialog-overlay"),n.remove();var o=0;i.each(this.instances,function(){o=Math.max(o,this.css("z-index"))}),this.maxZ=o},height:function(){var n,s;return i.browser.msie&&i.browser.version<7?(n=Math.max(e.documentElement.scrollHeight,e.body.scrollHeight),s=Math.max(e.documentElement.offsetHeight,e.body.offsetHeight),s>n?i(t).height()+"px":n+"px"):i(e).height()+"px"},width:function(){var n,s;return i.browser.msie?(n=Math.max(e.documentElement.scrollWidth,e.body.scrollWidth),s=Math.max(e.documentElement.offsetWidth,e.body.offsetWidth),s>n?i(t).width()+"px":n+"px"):i(e).width()+"px"},resize:function(){var t=i([]);i.each(i.ui.dialog.overlay.instances,function(){t=t.add(this)}),t.css({width:0,height:0}).css({width:i.ui.dialog.overlay.width(),height:i.ui.dialog.overlay.height()})}}),i.extend(i.ui.dialog.overlay.prototype,{destroy:function(){i.ui.dialog.overlay.destroy(this.$el)}})}(jQuery),o.prototype=Error.prototype,nx.iac.Debugger={enabled:!1,name:location.host+""+location.pathname,hey:function(){return this.enabled&&this.log("IAC("+this.name+"): "),this},log:function(){try{this.enabled&&t.console&&t.console.log&&t.console.log.apply(t.console,arguments)}catch(e){}return this},warn:function(){try{this.enabled&&t.console&&t.console.warn&&t.console.warn.apply(t.console,arguments)}catch(e){}return this},debug:function(){try{this.enabled&&t.console&&t.console.debug&&t.console.debug.apply(t.console,arguments)}catch(e){}return this}},a.prototype.incomingMessageFactory=function(t){var e,i=new c;if(!this.validateMessageData(t))return null;switch(i.setFlags(t.type),i.setName(t.usecase),i.setSender(t.sender),i.setPayload.apply(i,t.args),!0){case!!(nx.iac.type.USECASE&t.type):e=new h;break;case!!(nx.iac.type.EVENT&t.type):e=new u;break;default:throw new o("Invalid IAC message detected, which is not flagged as USECASE or EVENT.","Invalid_IAC_message_detected")}return e.protocol=i,e.transport=this,e},a.prototype.outgoingMessageFactory=function(t,e){return t},a.prototype.validateMessageData=function(t){return t&&t.sender&&t.type&&t.usecase},r.prototype=new a,r.prototype.constructor=a,h.prototype=new l,h.prototype.constructor=l,u.prototype=new l,u.prototype.constructor=l,!function(t,e,i){nx.Log={enabled:!1,name:location.href,hey:function(){return this.enabled&&this.log("LOGGER("+this.name+"): "),this},log:function(){try{this.enabled&&t.console&&t.console.log&&t.console.log.apply(t.console,arguments)}catch(e){}return this},warn:function(){try{this.enabled&&t.console&&t.console.warn&&t.console.warn.apply(t.console,arguments)}catch(e){}return this},debug:function(){try{this.enabled&&t.console&&t.console.debug&&t.console.debug.apply(t.console,arguments)}catch(e){}return this},trace:function(){try{this.enabled&&t.console&&t.console.trace&&t.console.trace.apply(console,arguments)}catch(e){}return this},info:function(){try{this.enabled&&t.console&&t.console.info&&t.console.info.apply(t.console,arguments)}catch(e){}return this},error:function(){try{this.enabled&&t.console&&t.console.error&&t.console.error.apply(t.console,arguments)}catch(e){}return this}}}(t,e),p.prototype=Error.prototype,nx.Config=new g;var b=function(){function t(){this.load=function(t){return $.getScript(t,function(){C.trigger(C.event.SCRIPT_LOADED,t)}),this}}return new t}(),C=function(){function e(){var e=[];this.event={CONNECTIVITY_ONLINE:"CONNECTIVITY_ONLINE",CONNECTIVITY_OFFLINE:"CONNECTIVITY_OFFLINE",SCRIPT_INTERRUPTION:"SCRIPT_INTERRUPTION",SCRIPT_LOADED:"SCRIPT_LOADED",KEEPALIVE_FAILED:"KEEPALIVE_FAILED",KEEPALIVE_SUCCEEDED:"KEEPALIVE_SUCCEEDED"},this.bind=function(i,n,s){return e.push({events:i.split(" "),fn:n,scope:s||t}),this},this.trigger=function(t){for(var i,n=0,s=e.length;s>n;n++)i=e[n],-1!==$.inArray(t,i.events)&&i.fn.apply(i.scope,arguments);return this}}return new e}(),_=function(){function e(){var e;this.call=function(t,e){return $.ajax({type:"get",url:nx.Config.get().navigator.keep_alive_url,async:!0,cache:!1}).always(function(i,n,s){var o=i&&i.status?i:s;o&&o.status&&o.status>=400&&o.status<500?(e&&e(),C.trigger(C.event.KEEPALIVE_FAILED,o.status)):(t&&t(),C.trigger(C.event.KEEPALIVE_SUCCEEDED,o&&o.status?o.status:null))}),this},this.run=function(){return e||(e=t.setInterval(s(this.call,this),nx.Config.get().navigator.keep_alive_ms)),this},this.stop=function(){return e&&(t.clearInterval(e),e=!1),this}}return new e}(),x=function(){function e(){this.online=function(){var t=!0;return $.ajax({type:"get",url:nx.Config.get().navigator.keep_alive_url,cache:!1,async:!1,timeout:500,complete:function(e){t=!(!e||!e.status)}}),t},this.offline=function(){return!this.online()},this.init=function(){$(t).on("online",function(){C.trigger(C.event.CONNECTIVITY_ONLINE)}).on("offline",function(){C.trigger(C.event.CONNECTIVITY_OFFLINE)})}}return new e}(),w=function(){function e(){this.lastSeen,this.interval,this.run=function(e){return e=e||1e3,this.interval||(this.lastSeen=$.now(),this.interval=t.setInterval(s(function(){var t=$.now(),e=this.lastSeen+1e4;t>e&&C.trigger(C.event.SCRIPT_INTERRUPTION,t-e),this.lastSeen=$.now()},this),e)),this},this.stop=function(){return this.interval&&(t.clearInterval(this.interval),this.interval=!1),this}}return new e}(),A=function(){function e(){this.$layers=$("div.interruption"),this.$connectionLost=$("#connection-lost"),this.$sessionExpired=$("#session-expired"),this.connectionRetry,this.onOnlineFixme=function(){this.$connectionLost.hide(),nx.IACCommunication.sendMessage(nx.IACCommunication.createEvent(T.ONENABLED,{count:++nx.Navigator.getFocusedApplication().iacEnabledCounter}),nx.Navigator.getFocusedApplication()),this.connectionRetry&&(t.clearInterval(this.connectionRetry),this.connectionRetry=!1),_.call()},this.onOfflineInterruption=function(){this.$layers.hide(),this.$connectionLost.show(),nx.IACCommunication.sendMessage(nx.IACCommunication.createEvent(T.ONDISABLED,{count:++nx.Navigator.getFocusedApplication().iacDisabledCounter}),nx.Navigator.getFocusedApplication()),this.connectionRetry||(this.connectionRetry=t.setInterval(function(){x.online()&&C.trigger(C.event.CONNECTIVITY_ONLINE)},1e4))},this.onScriptInterruption=function(){x.offline()&&C.trigger(C.event.CONNECTIVITY_OFFLINE)},this.onKeepAliveInterruption=function(){this.$layers.hide(),this.$sessionExpired.show(),nx.IACCommunication.sendMessage(nx.IACCommunication.createEvent(T.ONDISABLED,{count:++nx.Navigator.getFocusedApplication().iacDisabledCounter}),nx.Navigator.getFocusedApplication())},this.init=function(){C.bind(C.event.CONNECTIVITY_ONLINE,this.onOnlineFixme,this),C.bind(C.event.CONNECTIVITY_OFFLINE,this.onOfflineInterruption,this),C.bind(C.event.SCRIPT_INTERRUPTION,this.onScriptInterruption,this),C.bind(C.event.KEEPALIVE_FAILED,this.onKeepAliveInterruption,this)}}return new e}(),E=function(){function t(){this.$html=$("html"),this.$logo=$("#current-application img.name"),this.init=function(){this.$logo.on("error",s(this.onLoadFailed,this))},this.onLoadFailed=function(t){this.brushLogo("home")},this.brushLogo=function(t){var e=nx.Config.get().navigator.theme,i="light";switch(!0){case e in{grey:0,lila:0,turquoise:0,beige:0,fmclassic:0,paper:0,picnicred:0,picnicblue:0,flowers:0,floralgreen:0,floralrose:0,handwriting:0,textilegrey:0,textilenature:0,print:0,wall:0,cristal:0,beach:0,city:0,spring:0,autum:0,summer:0,birds:0,dragonfly:0,kitty:0,winter:0}:i="light";break;case e in{blue:0}:i="blue";break;case e in{textile:0,jeans:0,leather:0,wood:0,darkblue:0,darkgrey:0,darkpurple:0,circles:0,blueprint:0,football:0,ornament:0,valentine:0,space:0}:i="dark"}return this.$logo.attr("src",nx.Config.get().navigator.logo_url.replace(/:theme/i,i).replace(/:sysname/i,t)),this},this.brush=function(t){var e=this.$html.attr("class").split(" "),n=nx.Config.get().navigator.theme;return e[0]=e[0]||i,e[1]=n||e[1],e[2]=e[2]||i,e[3]=t||e[3],this.brushLogo(e[3]),this.$html.removeAttr("class").addClass(e.join(" ")),this},this.get=function(){return nx.Config.get().navigator.theme},this.set=function(t){return nx.Config.extend({navigator:{theme:t}}),this}}return new t}(),S=function(){function t(){this.onTifLoaded=function(t,e){e==nx.Config.get().navigator.tif.src&&"undefined"!=typeof NSfTIF&&"tifInit"in NSfTIF&&(NSfTIF.tifInit(nx.Config.get().navigator.tif.cfg),NSfTIF.reset())},this.init=function(){C.bind(C.event.SCRIPT_LOADED,this.onTifLoaded,this);var t=nx.Config.get().navigator.tif;t&&t.src&&b.load(t.src)}}return new t}(),I=function(){function t(){var t,e,i,n,s=!1,o=null,a=0,r={alarm:8,warning:5,notice:3};this.init=function(e){t=e,this.reset()},this.reset=function(){clearTimeout(e),s=!1,o=new $.Deferred,i={alarm:[],warning:[],notice:[]}},this.start=function(i){return n=i,s||(s=!0,a++,this.sendBroadcast(),e=setTimeout($.proxy(this.stopPeriod,this),t.wait_time)),o},this.intercept=function(t,e){s&&$.isPlainObject(e)&&e.severity&&e.headline&&e.message&&r[e.severity]&&this.checkWhitelist(t,e)&&i[e.severity].push($.extend({sender:t},e))},this.checkWhitelist=function(e,i){return t.applications&&0!=t.applications.length?t.applications[e]&&r[t.applications[e]]&&r[i.severity]<=r[t.applications[e]]?!0:!1:!0},this.stopPeriod=function(){var t,e=!1;switch(!0){case i.alarm.length>0:e=!0;break;case 1==a&&i.warning.length+i.notice.length>0:e=!0}e?(t=this.generateMessages(),this.showDialog(t),o.reject()):o.resolve(),this.reset()},this.generateMessages=function(){var t=[];return $.each(i,function(e,i){$.each(i,function(e,i){t.push(i)})}),t},this.sendBroadcast=function(){P.handle(nx.IACCommunication.createUsecase("softlogout_pending",{}).asRPE())},this.showDialog=function(t){var e=nx.IACCommunication.createUsecase("open_softlogout_dialog",t).asRPE();e.protocol.setSender(n),P.handle(e)},this.isEnabled=function(){return t&&t.enabled?!0:!1},this.isPending=function(){return!!s}}return new t}(),N=function(){function e(){this.$window=$(t),this.$container=$("#unitedinternet_toolbar_container"),this.$toolbar=$("#unitedinternet_toolbar"),this.$scratchpad=$("#unitedinternet_toolbar_scratchpad"),this.init=function(){this.$window.on("unitedinternet_toolbar_start_usecase",s(this.handleToolbarUsecase,this))},this.handleToolbarUsecase=function(){try{var t,e=this.$toolbar.attr("event_data_to_page");if(!e)return void this.responseFailure(i,"BAD_REQUEST","No payload property defined");if(t=JSON.parse($.base64("decode",e)),!($.isPlainObject(t)&&t.id&&t.usecase&&t.caller_app&&t.caller_version))return void this.responseFailure($.isPlainObject(t)&&t.id?t.id:i,"BAD_REQUEST","Invalid data structure");if(t.args=t.args||[{}],t.args.length||t.args.push({}),"openmail"==t.usecase&&(t.usecase="open_mail"),!nx.IACCommunication.hasUsecase(t.usecase)&&!nx.IACCommunication.hasUsecase(t.usecase.usecase))return void this.responseFailure(t.id,"UNKNOWN_USECASE",["Usecase",t.usecase,"does not exist."].join(" "));P.handle(this.iacUsecaseFactory(t)),this.responseSuccess(t.id)}catch(n){this.responseFailure(0,"INTERNAL_ERROR","An unknown error occured.")}},this.iacUsecaseFactory=function(t){var e;return"string"==typeof t.usecase?(e=nx.IACCommunication.createUsecase(t.usecase),e.protocol.setSender("toolbar"),e.setPayload.apply(e,t.args),e[t.background?"asRPE":"asRPC"]()):e=nx.IACCommunication.createUsecaseFromConfig(t.usecase),e},this.responseSuccess=function(t){this.$window.trigger(jQuery.Event("unitedinternet_toolbar_start_usecase_response",{payload:{id:t,success:!0,error_code:"",error_message:""}}))},this.responseFailure=function(t,e,i){this.$window.trigger(jQuery.Event("unitedinternet_toolbar_start_usecase_response",{payload:{id:t,success:!1,error_code:e,error_message:i}}))},this.setSessionAlive=function(t){this.$toolbar.attr("session_alive",(!!t).toString())}}return new e}();d.prototype=new f,d.prototype.constructor=f,m.prototype=new f,m.prototype.constructor=f,a.prototype.incomingMessageFactory=function(t){var e,i=new c;if(!this.validateMessageData(t))return null;switch(t.type){case"RPC":t.type=nx.iac.type.USECASE|nx.iac.type.RPC|nx.iac.type.INTERN,this.setIACVersion(t.sender,310);break;case"RPE":t.type=nx.iac.type.USECASE|nx.iac.type.RPE|nx.iac.type.INTERN,this.setIACVersion(t.sender,310);break;case"HUB":t.type=nx.iac.type.USECASE|nx.iac.type.RPE|nx.iac.type.INTERN,this.setIACVersion(t.sender,310);break;default:this.setIACVersion(t.sender,400)}switch(i.setFlags(t.type),i.setName(t.usecase),i.setSender(t.sender),i.setPayload.apply(i,t.args),!0){case!!(nx.iac.type.USECASE&t.type):e=new h,e.config=nx.Config.get().communication.usecases[t.usecase];break;case!!(nx.iac.type.EVENT&t.type):e=new u;break;default:throw new o("Invalid IAC message detected, which is not flagged as USECASE or EVENT.")}return e.protocol=i,e.transport=this,e},a.prototype.outgoingMessageFactory=function(t,e){var i=$.extend({},t);switch(!0){case 300==e.iacVersion||310==e.iacVersion:nx.iac.type.EVENT&t.type?i.type="EVT":i.type=nx.iac.type.RPC&t.type?"RPC":"RPE";break;case 400==e.iacVersion:break;default:throw new o('The application "'+e.iacAppname+'" is using an unknown or deprecated IAC version: '+e.iacVersion)}return i},a.prototype.setIACVersion=function(t,e){nx.Navigator.getApplications(t).iacVersion=e};var P={handle:function(t){if(!(t instanceof h))throw new o("IACHub can only handle type IACUsecase messages.");var e,i,n=nx.Navigator.getApplications(t.getSender());1==t.config.apps.length&&"broadcast"==t.config.apps[0]?(O.dispatch(t),i=nx.Navigator.getApplications("*",function(t){return t.isRunning()})):i=nx.Navigator.getApplications(t.config.apps),k.track(t),$.each(i,function(i,s){if(e=s.getSysname(),e==O.SYSNAME)return O.dispatch(t),!0;if(s=nx.Navigator.getApplications(e),s instanceof d)switch(!0){case!!(t.protocol.getFlags()&nx.iac.type.RPC):nx.Navigator.openApplication(e,!1,t.getName());break;case!!(t.protocol.getFlags()&nx.iac.type.RPE):nx.Navigator.openApplication(e,!0,t.getName())}else s instanceof m&&nx.Navigator.openDialog(n,e,t.getName());nx.IACCommunication.sendMessage(t,s)})}},T={ONSTART:"onstart",ONCLOSE:"onclose",ONFOCUS:"onfocus",ONRESUMEFOCUS:"onresumefocus",ONBLUR:"onblur",ONRESTART:"onrestart",ONENABLED:"onenabled",ONDISABLED:"ondisabled"};h.prototype.config=null,h.prototype.validate=function(){if(!this.config)return nx.Log.error('IAC use case validaten failed. Unknown IAC use case named "'+this.getName()+'".'),!1;if(!nx.Navigator.hasApplication(this.getSender()))return nx.Log.error('IAC use case validation failed. Unknown sender "'+this.getSender()+'".'),!1;if(this.config.arguments&&!$.isEmptyObject(this.config.arguments)){var t=this.getPayload(),e=[],i=this.config.arguments.required||{},n=this.config.arguments.optional||{};if(1!=t.length||!$.isPlainObject(t[0]))return nx.Log.error('IAC use case validaten failed. No valid argument map set for "'+this.getName()+'".'),!1;if($.each(i,s(function(i,n){!i in t[0]&&e.push('IAC use case validation failed. Required argument "'+i+'" is not defined for use case "'+this.getName()+'".'),("array"==n.type&&!$.isArray(t[0][i])||"array"!=n.type&&typeof t[0][i]!=n.type)&&e.push('IAC use case validation failed. Required argument "'+i+'" must be a type of "'+n.type+'" for use case "'+this.getName()+'".')},this)),$.each(n,s(function(i,n){t[0][i]&&("array"==n.type&&!$.isArray(t[0][i])||"array"!=n.type&&typeof t[0][i]!=n.type)&&e.push('IAC use case validation failed. Optional argument "'+i+'" must be a type of "'+n.type+'" for use case "'+this.getName()+'".')},!0)),$.each(t[0],s(function(t,s){(!t in i||!t in n)&&e.push('IAC use case validation failed. Argument "'+t+'" is not available for use case "'+this.getName()+'".')},this)),e.length)return $.each(e,s(function(t,e){nx.Log.warn(e)},this)),!1}return this.config.deprecated&&nx.Config.get().communication.usecases[this.config.deprecated]?nx.Log.warn('The IAC use case "'+this.getName()+'" is deprecated. Please use "'+this.config.deprecated+'" instead.'):this.config.deprecated&&nx.Log.warn('The IAC use case "'+this.getName()+'" is deprecated.'),!0};var k=function(){function t(){this.doNotTrack={tracking_track:0,tracking_campaign:0,theme_sync:0,__connect__:0,__connected__:0,__disconnect__:0,__disconnected__:0,update_trinity_information:0},this.track=function(t){if(!(t.getName()in this.doNotTrack)){var e=nx.Navigator.getFocusedApplication(),i="none";e instanceof d&&(i=e.getSysname()),P.handle(nx.IACCommunication.createUsecase("tracking_track",{section:"usecase",modifier:"-,waimg1",type:"event",label:{fgapp:i,usecase:t.getName(),type:t.protocol.getFlags()&nx.iac.type.RPC?"RPC":"RPE",sender:t.getSender(),receivers:t.config.apps}}).asRPE())}}}return new t}(),O=function(){function t(){this.SYSNAME="navigator";var t={__connect__:function(t){var e=nx.Navigator.getApplications(t.getSender());e.iacConnected=!0,nx.IACCommunication.sendMessage(nx.IACCommunication.createUsecase("__connected__"),e),nx.IACCommunication.sendQueuedMessages(e)},__disconnect__:function(t){var e=nx.Navigator.getApplications(t.getSender());nx.IACCommunication.sendMessage(nx.IACCommunication.createUsecase("__disconnected__"),e),e.iacConnected=!1},logout:function(t){nx.Navigator.logout()},logout_navigator:function(t){var e=t.getPayload()[0]||{};nx.Navigator.logout(e.targeturl||null)},softlogout_intercept:function(t){var e=t.getPayload()[0]||{};"undefined"!=typeof I&&I.isEnabled()&&I.intercept(t.getSender(),e)},reinitialize:function(t){nx.Navigator.reinitialize.apply(nx.Navigator,t.getPayload())},reinitialize_navigator:function(t){nx.Navigator.reinitialize(t.getPayload()[0].goto_feature)},reinitialize_app:function(t){var e=nx.Navigator.getApplications(t.getSender());_.call(function(){e.reinitialize()})},reinitialize_application:function(t){var e=nx.Navigator.getApplications(t.getSender());_.call(function(){e.reinitialize()})},open_feature:function(t){nx.Navigator.handleFeature.apply(nx.Navigator,t.getPayload())},open_goto_feature:function(t){var e=t.getPayload()[0];nx.Navigator.handleFeature(e.goto_feature,e.mediacode,e.data)},disable_navigator:function(t){nx.Navigator.disable()},enable_navigator:function(t){nx.Navigator.enable()},close_application:function(t){var e=nx.Navigator.getApplications(t.getSender());e instanceof m?nx.Navigator.closeDialog(e.getSysname()):nx.Log.warn("Usecase close_application is currently only supported for DialogApplications.")},theme_switched:function(t){var e=t.getPayload()[0].theme,i=t.getPayload()[0].saved;$("html").hasClass(e)||E.set(e).brush(),i&&nx.Navigator.update()},theme_sync:function(t){var e=t.getPayload()[0].theme;$("html").hasClass(e)||P.handle(nx.IACCommunication.createUsecase("theme_switched",{theme:t.getPayload()[0].theme,theme_bg:t.getPayload()[0].theme_bg,saved:!0}).asRPE())},hide_navigator:function(t){nx.Navigator.hide()},show_navigator:function(t){nx.Navigator.show()},reload_navigator:function(t){location.reload()},init_mailvelope_install_firefox:function(t){var i=$("<iframe>").attr({src:"https://download.mailvelope.com/releases/latest/mailvelope.firefox.xpi",width:0,height:0});i.appendTo($(e.body)),setTimeout(function(){i.remove()},500)}};this.dispatch=function(e){if(!(e instanceof h))throw new p("usecase must be type of IACUsecase");e.getName()in t&&t[e.getName()](e)}}return new t}();nx.IACCommunication=new v,nx.Navigator=new y}(window,document);