BaseEditor=function(e,b,d){return b({name:"BaseEditor",mixins:[function(){this.defaultAttrs({editorHeader:".editor_header",editorBody:".editor_body",editorFooter:".editor_footer",composeHeader:".compose-header"});this.showEditorBody=function(){this.select("editorBody").removeClass(d.IS_HIDDEN)};this.setEditorBodyPosition=function(){this.select("editorBody").css({top:this.select("editorHeader").outerHeight(),bottom:this.select("editorFooter").outerHeight()})};this.setEditorFocus=function(){};this.addRecipientToComposeHeader=
function(a,b){this.select("composeHeader").trigger("recipient.add",b)};this.after("initialize",function(){this.showEditorBody();this.on(document,"editor.focus",this.setEditorFocus);this.on(document,"resize.editor.head",this.setEditorBodyPosition);this.on(document,"contact.item.clicked",this.addRecipientToComposeHeader)})}]})}(jQuery,defineComponent,CssUtils.modifier);
SecureEmailMultiObjectTextField=function(e,b,d,a,f,c){return b({name:"SecureEmailMultiObjectTextField",parent:d,mixins:[a,f,function(){this.defaultAttrs({secureLabel:".objectivation-address-write_secure"});this.addSecureMailBehavior=function(a,b){b.isSecure?(a.addClass("is-secure"),this.addClientSideFlyoutBehavior({trigger:a.find(this.attr.secureLabel),options:{"data-ftd-trigger":"secureEmailFlyout","data-ftd-offset":"-120"},onOpen:this.onSecureFlyoutOpen,onClose:this.onSecureFlyoutClose})):a.removeClass("is-secure")};
this.onSecureFlyoutOpen=function(){this.track("secure-label-click");this.select("secureLabel").addClass(c.IS_SELECTED)};this.onSecureFlyoutClose=function(){this.select("secureLabel").removeClass(c.IS_SELECTED)};this.after("addObjectivationBehavior",function(a,b,c){this.addSecureMailBehavior(b,c)});this.after("updateObjectivationBehavior",function(a,b,c){this.addSecureMailBehavior(b,c)})}]})}(jQuery,defineComponent,MultiObjectTextField,mixinTrack,mixinFlyout,CssUtils.modifier);
ComposeHeader=function(e,b,d){return b({name:"ComposeHeader",mixins:[function(){this.defaultAttrs({controlSend:".compose-header_send",controlToggle:".compose-header_toggle",objectTo:".compose-header_to",objectBc:".compose-header_bc",objectBcc:".compose-header_bcc",objectSubject:".compose-header_subject",objectSubjectInput:".mailobjectpanel-textfield_input",toggleModifier:"is-minimized",select2Component:"input.js-select2",multiObjectTextField:".form-element-multiobjecttextfield",mailPanel:".mailobjectpanel",
objectivationPanel:".mailobjectpanel-objectivation",allInputElements:"input",resizeTimeout:50});this.selectedObjectivationPanel=null;this.onClickSend=function(){};this.onClickToggle=function(){this.toggleVisibility()};this.isSupportedResizeEvent=function(a){switch(a.type){case "advertisement":return"shown"===a.namespace||"resize"===a.namespace;case "resize":return a.target===window;default:return!1}};this.resize=function(a){this.trigger(document,"resize.editor.head");this.isSupportedResizeEvent(a)&&
this.select("multiObjectTextField").trigger("multiobjecttextfield.resize")};this.toggleVisibility=function(){this.$node.toggleClass(this.attr.toggleModifier);this.trigger("resize")};this.hasToRecipients=function(){return 0<this.select("objectTo").find(this.attr.select2Component).select2("data").length};this.hasSubject=function(){return 0<this.select("objectSubject").find(this.attr.objectSubjectInput).val().length};this.onFocus=function(){this.hasToRecipients()?this.hasSubject()?this.focusEditor():
this.focusObject("objectSubject"):this.focusObject("objectTo")};this.focusObject=function(a){this.select(a).trigger("focus")};this.focusEditor=function(){this.trigger(document,"editor.focus")};this.preventSubmit=function(a){a.keyCode===d.KEYS.ENTER&&a.preventDefault()};this.onSelectObjectivationPanel=function(a){this.selectedObjectivationPanel=e(a.target).closest(this.attr.objectivationPanel)};this.hasSelectedObjectivationPanel=function(){return 0<e(this.selectedObjectivationPanel).length};this.getSelectedObjectivationPanel=
function(){return this.selectedObjectivationPanel};this.addRecipient=function(a,b){var c;c=this.hasSelectedObjectivationPanel()?this.getSelectedObjectivationPanel():this.select("objectTo");c.is(":hidden")&&this.toggleVisibility();c.trigger("recipient.add",b)};this.after("initialize",function(){this.on("click",{controlSend:this.onClickSend,controlToggle:this.onClickToggle,objectivationPanel:this.onSelectObjectivationPanel});this.on("recipient.add",this.addRecipient);this.on("resize.select2",this.resize);
this.on(document,"advertisement.shown",this.resize);this.on(document,"advertisement.resize",this.resize);this.on("focus.head.compose",this.onFocus);this.on("keydown",{allInputElements:this.preventSubmit})})}]})}(jQuery,defineComponent,phx.util);